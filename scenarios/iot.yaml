id: iot
name: IoT Telemetry and Fleet Operations
version: 1.0.0
seed: 20260217
entities:
  - name: customers
    target_table: iot_customers
    rows: 20000
    columns:
      - name: customer_id
        type: uuid
        generator:
          type: uuid4
      - name: customer_name
        type: string
        generator:
          type: faker_name
      - name: customer_city
        type: string
        generator:
          type: faker_city
      - name: tier
        type: string
        generator:
          type: choice
          params:
            values: [starter, growth, enterprise]
            weights: [0.55, 0.32, 0.13]

  - name: sites
    target_table: iot_sites
    rows: 160000
    columns:
      - name: site_id
        type: uuid
        generator:
          type: uuid4
      - name: customer_id
        type: uuid
        generator:
          type: fk
          params:
            entity: customers
            column: customer_id
      - name: site_city
        type: string
        generator:
          type: faker_city
      - name: environment
        type: string
        generator:
          type: choice
          params:
            values: [office, factory, warehouse, retail, hospital]

  - name: devices
    target_table: devices
    rows: 1800000
    columns:
      - name: device_id
        type: uuid
        generator:
          type: uuid4
      - name: site_id
        type: uuid
        generator:
          type: fk
          params:
            entity: sites
            column: site_id
      - name: model
        type: string
        generator:
          type: choice
          params:
            values: [sensor_v1, sensor_v2, gateway_v2, camera_lite, camera_pro]
      - name: firmware_channel
        type: string
        generator:
          type: choice
          params:
            values: [stable, canary, beta]
            weights: [0.8, 0.12, 0.08]
      - name: installed_at
        type: timestamp
        generator:
          type: time_series
          params:
            start: "-900d"
            step: "20s"
            jitter_seconds: 86400

  - name: telemetry
    target_table: telemetry
    rows: 72000000
    columns:
      - name: telemetry_id
        type: uuid
        generator:
          type: uuid4
      - name: device_id
        type: uuid
        generator:
          type: fk
          params:
            entity: devices
            column: device_id
      - name: metric_name
        type: string
        generator:
          type: choice
          params:
            values: [temperature_c, humidity_pct, battery_pct, cpu_pct, pressure_kpa, signal_dbm]
      - name: metric_value
        type: float
        generator:
          type: normal
          params:
            mean: 55
            std: 18
      - name: quality
        type: string
        generator:
          type: choice
          params:
            values: [good, suspect, missing]
            weights: [0.93, 0.06, 0.01]
      - name: observed_at
        type: timestamp
        generator:
          type: time_series
          params:
            start: "-180d"
            step: "15ms"
            jitter_seconds: 8

  - name: alerts
    target_table: alerts
    rows: 2200000
    columns:
      - name: alert_id
        type: uuid
        generator:
          type: uuid4
      - name: device_id
        type: uuid
        generator:
          type: fk
          params:
            entity: devices
            column: device_id
      - name: alert_type
        type: string
        generator:
          type: choice
          params:
            values: [battery_low, threshold_breach, offline, packet_loss, tamper, firmware_drift]
      - name: severity
        type: string
        generator:
          type: choice
          params:
            values: [info, warning, critical]
            weights: [0.3, 0.55, 0.15]
      - name: acknowledged
        type: bool
        generator:
          type: choice
          params:
            values: [true, false]
            weights: [0.7, 0.3]
      - name: opened_at
        type: timestamp
        generator:
          type: time_series
          params:
            start: "-180d"
            step: "600ms"
            jitter_seconds: 45
